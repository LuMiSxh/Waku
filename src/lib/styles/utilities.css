/**
 * Waku Utility Classes
 * Reusable utility classes for common patterns
 */

/* ========================================
   GLASS EFFECTS
   ======================================== */

/* Global glass speckles - Always visible, follows cursor with hue rotation */
body::before {
	content: '';
	position: fixed;
	inset: 0;
	pointer-events: none;
	z-index: 9999;
	opacity: 0.3;
	background: radial-gradient(
			circle 4px at var(--waku-global-cursor-x, 50%) var(--waku-global-cursor-y, 50%),
			oklch(
				from var(--waku-accent) calc(l + 0.2) calc(c * 0.6)
					calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.15
			)
				0%,
			oklch(
				from var(--waku-accent) calc(l + 0.15) calc(c * 0.4)
					calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.08
			)
				30%,
			transparent 100%
		),
		radial-gradient(
			circle 3px at calc(var(--waku-global-cursor-x, 50%) + 10%) calc(var(--waku-global-cursor-y, 50%) - 8%),
			oklch(1 0 0 / 0.12) 0%,
			oklch(1 0 0 / 0.06) 50%,
			transparent 100%
		),
		radial-gradient(
			circle 2.5px at calc(var(--waku-global-cursor-x, 50%) - 12%) calc(var(--waku-global-cursor-y, 50%) + 6%),
			oklch(1 0 0 / 0.1) 0%,
			oklch(1 0 0 / 0.05) 50%,
			transparent 100%
		);
	transition: opacity 0.2s ease-out;
	mix-blend-mode: screen;
}

/* Reduce global speckles in dark mode, but keep color */
html.dark body::before {
	opacity: 0.2;
	background: radial-gradient(
			circle 4px at var(--waku-global-cursor-x, 50%) var(--waku-global-cursor-y, 50%),
			oklch(
				from var(--waku-accent) calc(l + 0.15) calc(c * 0.7)
					calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.2
			)
				0%,
			oklch(
				from var(--waku-accent) calc(l + 0.1) calc(c * 0.5)
					calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.1
			)
				30%,
			transparent 100%
		),
		radial-gradient(
			circle 3px at calc(var(--waku-global-cursor-x, 50%) + 10%) calc(var(--waku-global-cursor-y, 50%) - 8%),
			oklch(from var(--waku-accent) calc(l + 0.2) calc(c * 0.6) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.15) 0%,
			oklch(from var(--waku-accent) calc(l + 0.15) calc(c * 0.4) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.08) 50%,
			transparent 100%
		),
		radial-gradient(
			circle 2.5px at calc(var(--waku-global-cursor-x, 50%) - 12%) calc(var(--waku-global-cursor-y, 50%) + 6%),
			oklch(1 0 0 / 0.12) 0%,
			oklch(1 0 0 / 0.08) 50%,
			transparent 100%
		);
}

/* Hide on non-glass areas - components can use .no-glass to hide */
.no-glass body::before {
	opacity: 0;
}

/* Base Interactive Glass - used by the interactiveGlass action */
.interactive-glass {
	position: relative;
	overflow: hidden;
}

/* Floating speckles/light particles - Now uses global cursor */
.interactive-glass::before {
	content: '';
	position: absolute;
	inset: 0;
	pointer-events: none;
	opacity: calc(0.3 + var(--glass-hover, 0) * 0.4);
	transition: opacity 0.35s cubic-bezier(0.16, 1, 0.3, 1);
	background: radial-gradient(
			circle 3px at var(--glass-speckle-1-x, 30%) var(--glass-speckle-1-y, 40%),
			oklch(1 0 0 / 0.6) 0%,
			oklch(1 0 0 / 0.3) 50%,
			transparent 100%
		),
		radial-gradient(
			circle 2px at var(--glass-speckle-2-x, 70%) var(--glass-speckle-2-y, 60%),
			oklch(1 0 0 / 0.5) 0%,
			oklch(1 0 0 / 0.25) 50%,
			transparent 100%
		),
		radial-gradient(
			circle 2.5px at var(--glass-speckle-3-x, 50%) var(--glass-speckle-3-y, 30%),
			oklch(1 0 0 / 0.55) 0%,
			oklch(1 0 0 / 0.28) 50%,
			transparent 100%
		);
}

/* Dark mode - reduce speckle intensity */
html.dark .interactive-glass::before {
	opacity: calc(0.15 + var(--glass-hover, 0) * 0.25);
}

/* Cursor glow overlay - Now uses global cursor position */
.interactive-glass::after {
	content: '';
	position: absolute;
	inset: -10%;
	pointer-events: none;
	opacity: var(--glass-hover, 0);
	transition: opacity 0.25s cubic-bezier(0.16, 1, 0.3, 1);
	background: radial-gradient(
		circle 180px at var(--glass-mouse-x, 50%) var(--glass-mouse-y, 50%),
		oklch(from var(--waku-accent) calc(l + 0.12) calc(c * 0.5) h / 0.18) 0%,
		oklch(from var(--waku-accent) calc(l + 0.08) calc(c * 0.3) h / 0.08) 40%,
		transparent 100%
	);
	mix-blend-mode: screen;
	filter: blur(8px);
}

/* Dark mode - more colorful cursor glow */
html.dark .interactive-glass::after {
	background: radial-gradient(
		circle 170px at var(--glass-mouse-x, 50%) var(--glass-mouse-y, 50%),
		oklch(from var(--waku-accent) calc(l + 0.1) calc(c * 0.8) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.15) 0%,
		oklch(from var(--waku-accent) calc(l + 0.08) calc(c * 0.6) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.08) 40%,
		transparent 100%
	);
	filter: blur(10px);
}

/* Standard glass effect (enhanced) */
.glass {
	backdrop-filter: blur(var(--waku-glass-blur)) saturate(var(--waku-glass-saturation))
		brightness(var(--waku-glass-brightness));
	-webkit-backdrop-filter: blur(var(--waku-glass-blur)) saturate(var(--waku-glass-saturation))
		brightness(var(--waku-glass-brightness));
	box-shadow: var(--shadow-glass), var(--waku-glass-edge-glow);
	background-image: var(--waku-glass-noise), var(--waku-glass-specular),
		linear-gradient(to bottom, var(--waku-glass-gradient-from), var(--waku-glass-gradient-to)),
		var(--waku-glass-reflection);
	border-radius: var(--radius-lg);
	border: 1px solid var(--waku-glass-edge);
	transition:
		transform 0.3s cubic-bezier(0.16, 1, 0.3, 1),
		box-shadow 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Dark mode - adjust glass appearance with color tint */
html.dark .glass {
	background-image: var(--waku-glass-noise),
		linear-gradient(
			calc(135deg + var(--waku-global-rotation, 0deg)),
			oklch(from var(--waku-accent) calc(l * 0.3) calc(c * 0.4) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.12) 0%,
			oklch(from var(--waku-fg-base) l c h / 0.06) 50%,
			oklch(from var(--waku-fg-base) l c h / 0.04) 100%
		);
	border-color: oklch(from var(--waku-border) calc(l + 0.08) c h / 0.6);
}

/* Heavy glass (modals, sheets) */
.glass-heavy {
	backdrop-filter: blur(var(--waku-glass-blur-heavy)) saturate(var(--waku-glass-saturation))
		brightness(var(--waku-glass-brightness));
	-webkit-backdrop-filter: blur(var(--waku-glass-blur-heavy)) saturate(var(--waku-glass-saturation))
		brightness(var(--waku-glass-brightness));
	box-shadow: var(--shadow-glass), var(--waku-glass-edge-glow);
	background-image: var(--waku-glass-mesh), var(--waku-glass-noise), var(--waku-glass-specular),
		linear-gradient(to bottom, var(--waku-glass-gradient-from), var(--waku-glass-gradient-to)),
		var(--waku-glass-reflection);
	border-radius: var(--radius-xl);
	border: 1px solid var(--waku-glass-edge);
	transition:
		transform 0.3s cubic-bezier(0.16, 1, 0.3, 1),
		box-shadow 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Dark mode - adjust heavy glass with color */
html.dark .glass-heavy {
	background-image: var(--waku-glass-noise),
		linear-gradient(
			calc(135deg + var(--waku-global-rotation, 0deg)),
			oklch(from var(--waku-accent) calc(l * 0.35) calc(c * 0.5) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.15) 0%,
			oklch(from var(--waku-fg-base) l c h / 0.08) 50%,
			oklch(from var(--waku-fg-base) l c h / 0.05) 100%
		);
	border-color: oklch(from var(--waku-border) calc(l + 0.1) c h / 0.7);
}

/* Subtle glass (buttons, small UI) */
.glass-subtle {
	backdrop-filter: blur(20px) saturate(150%) brightness(102%);
	-webkit-backdrop-filter: blur(20px) saturate(150%) brightness(102%);
	background: var(--waku-glass-gradient-from);
	box-shadow: var(--shadow-md), var(--waku-glass-edge-glow);
	border-radius: var(--radius-md);
	border: 1px solid var(--waku-border);
	transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Dark mode - adjust subtle glass with color */
html.dark .glass-subtle {
	background: linear-gradient(
		calc(135deg + var(--waku-global-rotation, 0deg)),
		oklch(from var(--waku-accent) calc(l * 0.28) calc(c * 0.35) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.1) 0%,
		oklch(from var(--waku-fg-base) l c h / 0.06) 60%,
		oklch(from var(--waku-fg-base) l c h / 0.03) 100%
	);
	border-color: oklch(from var(--waku-border) calc(l + 0.08) c h / 0.6);
	backdrop-filter: blur(20px) saturate(130%) brightness(100%);
	-webkit-backdrop-filter: blur(20px) saturate(130%) brightness(100%);
}

/* Thin glass (subtle accents) */
.glass-thin {
	backdrop-filter: blur(16px) saturate(140%) brightness(102%);
	-webkit-backdrop-filter: blur(16px) saturate(140%) brightness(102%);
	background: linear-gradient(
		135deg,
		var(--waku-glass-gradient-from),
		var(--waku-glass-gradient-to)
	);
	box-shadow: var(--shadow-sm);
	border: 1px solid var(--waku-glass-edge);
	transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Dark mode - adjust thin glass with color */
html.dark .glass-thin {
	background: linear-gradient(
		calc(135deg + var(--waku-global-rotation, 0deg)),
		oklch(from var(--waku-accent) calc(l * 0.25) calc(c * 0.3) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.08) 0%,
		oklch(from var(--waku-fg-base) l c h / 0.05) 60%,
		oklch(from var(--waku-fg-base) l c h / 0.02) 100%
	);
	border-color: oklch(from var(--waku-border) calc(l + 0.06) c h / 0.5);
}

/* Thick glass variant */
.glass-thick {
	backdrop-filter: blur(24px) saturate(160%) brightness(102%);
	-webkit-backdrop-filter: blur(24px) saturate(160%) brightness(102%);
	background: linear-gradient(
		135deg,
		var(--waku-glass-gradient-from),
		var(--waku-glass-gradient-to)
	);
	box-shadow: var(--shadow-md), var(--waku-glass-edge-glow);
	border: 1px solid var(--waku-glass-edge);
	transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Dark mode - adjust thick glass with color */
html.dark .glass-thick {
	background: linear-gradient(
		calc(135deg + var(--waku-global-rotation, 0deg)),
		oklch(from var(--waku-accent) calc(l * 0.32) calc(c * 0.45) calc(h + var(--waku-cursor-hue-shift, 0deg)) / 0.13) 0%,
		oklch(from var(--waku-fg-base) l c h / 0.07) 50%,
		oklch(from var(--waku-fg-base) l c h / 0.04) 100%
	);
	border-color: oklch(from var(--waku-border) calc(l + 0.09) c h / 0.65);
}

/* ========================================
   ELEVATIONS
   ======================================== */
.elevation-0 {
	background-color: var(--waku-surface-0);
}

.elevation-1 {
	background-color: var(--waku-surface-1);
	box-shadow: var(--shadow-sm);
}

.elevation-2 {
	background-color: var(--waku-surface-2);
	box-shadow: var(--shadow-md);
	border-radius: var(--radius-lg);
}

/* ========================================
   INTERACTIVE STATES
   ======================================== */
.interactive {
	transition:
		transform var(--transition-fast),
		box-shadow var(--transition-fast);
	cursor: pointer;
}

.interactive:hover {
	transform: translateY(-1px);
}

.interactive:active {
	transform: translateY(0px);
	transition-duration: 100ms;
}

.scale-interactive {
	transition: transform var(--transition-base) var(--spring-smooth);
	cursor: pointer;
}

.scale-interactive:hover {
	transform: scale(1.02);
}

.scale-interactive:active {
	transform: scale(0.98);
}

/* ========================================
   BORDER RADIUS
   ======================================== */
.rounded-sm {
	border-radius: var(--radius-sm);
}

.rounded-md {
	border-radius: var(--radius-md);
}

.rounded-lg {
	border-radius: var(--radius-lg);
}

.rounded-xl {
	border-radius: var(--radius-xl);
}

.rounded-2xl {
	border-radius: var(--radius-2xl);
}

.rounded-full {
	border-radius: var(--radius-full);
}

/* ========================================
   SHADOWS
   ======================================== */
.shadow-sm {
	box-shadow: var(--shadow-sm);
}

.shadow-md {
	box-shadow: var(--shadow-md);
}

.shadow-lg {
	box-shadow: var(--shadow-lg);
}

.shadow-xl {
	box-shadow: var(--shadow-xl);
}

.shadow-2xl {
	box-shadow: var(--shadow-2xl);
}

.shadow-glass {
	box-shadow: var(--shadow-glass);
}

.shadow-none {
	box-shadow: none;
}
